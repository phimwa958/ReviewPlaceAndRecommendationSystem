{% extends "review/base.html" %}

{% block title %}Home - Review Place{% endblock %}

{% block content %}
<div class="mb-8">
    <form method="get" action="{% url 'home' %}" class="flex flex-wrap items-center gap-4">
<!-- ปุ่มค้นหาสถานที่ใหม่ -->        
    <input type="text" name="search" placeholder="ค้นหาสถานที่..." value="{{ search_query|default:'' }}" class="flex-grow p-3 rounded-2xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-md bg-white/70 backdrop-blur-md"/>
<!-- ปุ่มค้นหาสถานที่ใหม่ --> 

<!-- ปุ่มเลือกหมวดหมู่ใหม่ --> 
    <div class="flex max-w-xs">
  <select name="category" class="w-full p-3 rounded-2xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-md bg-white/70 backdrop-blur-md cursor-pointer">
    <option value="">ทุกหมวดหมู่</option>
      {% for value, display in categories %}
      <option value="{{ value }}" {% if value == selected_category %}selected{% endif %}>
          {{ display }}
      </option>
      {% endfor %}
  </select>
</div>
<!-- ปุ่มเลือกหมวดหมู่ใหม่ --> 

<!-- ปุ่มค้นหาใหม่ -->
    <button type="submit" class="button">ค้นหา<span class="hoverEffect"><div></div>
    </span>
    </button>
</form>

{% if is_search %}
    {# --- Search Results --- #}
    <h2 class="recommend-title text-3xl font-bold text-transparent bg-clip-text drop-shadow-lg mt-8 mb-8 animate-gradient">ผลการค้นหาสำหรับ "{{ search_query|default:'' }}"</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for place in places %}
            {% include 'review/partials/place_card.html' with place=place %}
        {% empty %}
            <p class="col-span-full text-center text-gray-500 text-xl">ไม่พบสถานที่ที่ตรงกับการค้นหา</p>
        {% endfor %}
    </div>

    {% include 'review/partials/pagination.html' with page_obj=page_obj %}

{% else %}
    {# --- Homepage Sections --- #}

    {% if user.is_authenticated and recommended_places %}
    <section class="mb-12">
        <div class="flex justify-between items-center mb-4">
    <!-- เปลี่ยน คำว่า เเนะสำหรับคุณให้น่าสนใจขึ้น -->  
            <h2 class="recommend-title text-3xl font-bold text-transparent bg-clip-text drop-shadow-lg mt-8 animate-gradient">แนะนำสำหรับคุณ</h2>
    <!-- เปลี่ยน คำว่า เเนะสำหรับคุณให้น่าสนใจขึ้น --> 

    <!-- เปลี่ยน คำว่า ดูเพิ่มเติม 1 ให้น่าสนใจขึ้น --> 
    <form action="{% url 'place_recommendations' %}" method="get" style="display:inline;">
        <button type="submit" class="uiverse-button mt-4"><p>ดูเพิ่มเติม</p><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="4">
    <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
        </svg>
        </button>
    </form>
    <!-- เปลี่ยน คำว่า ดูเพิ่มเติม 1 ให้น่าสนใจขึ้น --> 
     
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
            {% for place in recommended_places %}
                {% include 'review/partials/place_card.html' with place=place %}
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if popular_places %}
    <section class="mb-12">
        <div class="flex justify-between items-center mb-4">
            <h2 class="recommend-title text-3xl font-bold text-transparent bg-clip-text drop-shadow-lg mt-4 animate-gradient">สถานที่ยอดนิยม</h2>

    <!-- เปลี่ยน คำว่า ดูเพิ่มเติม 2 ให้น่าสนใจขึ้น -->         
    <form action="{% url 'place_popular' %}" method="get" style="display:inline;">
        <button type="submit" class="uiverse-button mt-4"><p>ดูเพิ่มเติม</p><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="4">
      <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
    </svg>
  </button>
</form>
    <!-- เปลี่ยน คำว่า ดูเพิ่มเติม 2 ให้น่าสนใจขึ้น --> 
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
            {% for place in popular_places %}
                {% include 'review/partials/place_card.html' with place=place %}
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if latest_places %}
    <section class="mb-12">
        <div class="flex justify-between items-center mb-4">
            <h2 class="recommend-title text-3xl font-bold text-transparent bg-clip-text drop-shadow-lg mt-4 animate-gradient">สถานที่ใหม่ล่าสุด</h2>
    <!-- เปลี่ยน คำว่า ดูเพิ่มเติม 3 ให้น่าสนใจขึ้น -->         
    <form action="{% url 'place_all' %}" method="get" style="display:inline;">
        <button type="submit" class="uiverse-button mt-4"><p>ดูเพิ่มเติม</p><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="4">
      <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
    </svg>
  </button>
</form>
    <!-- เปลี่ยน คำว่า ดูเพิ่มเติม 3 ให้น่าสนใจขึ้น --> 
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            {% for place in latest_places %}
                {% include 'review/partials/place_card.html' with place=place %}
            {% endfor %}
        </div>
    </section>
    {% endif %}

{% endif %}
{% endblock %}